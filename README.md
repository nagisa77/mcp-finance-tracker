# MCP Finance Tracker ğŸ’°

ä¸€ä¸ªåŸºäº **Model Context Protocol (MCP)** çš„è®°è´¦ä¸åˆ†ææœåŠ¡ï¼Œå¸®åŠ©ä½ åœ¨è‡ªåŠ¨åŒ–å·¥ä½œæµä¸­è½»æ¾å®Œæˆè´¦å•è®°å½•ä¸åˆ†ç±»ç®¡ç†ã€‚æ— è®ºæ˜¯åµŒå…¥åˆ°æ™ºèƒ½åŠ©æ‰‹ï¼Œè¿˜æ˜¯ç‹¬ç«‹è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œå®ƒéƒ½èƒ½æä¾›æ¸…æ™°çš„æ•°æ®ç»“æ„ä¸ç¨³å®šçš„ API æ”¯æ’‘ã€‚

## âœ¨ é¡¹ç›®ç‰¹è‰²

- ğŸ¤ **åŸç”Ÿ MCP æ”¯æŒ**ï¼šé‡‡ç”¨ FastMCP æ¡†æ¶ï¼Œå®ç°é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿçš„ MCP æœåŠ¡ç«¯ã€‚
- ğŸ—ƒï¸ **ç»“æ„åŒ–è´¦å•ç®¡ç†**ï¼šä½¿ç”¨ MySQL å­˜å‚¨è´¦å•ä¸åˆ†ç±»æ•°æ®ï¼Œå¼€ç®±å³ç”¨çš„é»˜è®¤åˆ†ç±»å¯å¿«é€Ÿå¼€å§‹è®°è´¦ã€‚
- ğŸ“¦ **ä¸€é”®éƒ¨ç½²**ï¼šæä¾› Docker é•œåƒä¸ docker-compose ç¼–æ’ï¼Œè‡ªåŠ¨åˆå§‹åŒ–æ•°æ®åº“ä¸å­—ä½“èµ„æºã€‚
- ğŸ§© **å·¥å…·å³æœåŠ¡**ï¼šå†…ç½® `get_categories` ä¸ `record_bill` MCP Toolï¼Œå¯ç›´æ¥è¢«ä»»ä½•å…¼å®¹å®¢æˆ·ç«¯è°ƒç”¨ã€‚
- ğŸ“ˆ **ä¸­æ–‡ç¯å¢ƒå‹å¥½**ï¼šé¢„ç½® `fonts-noto-cjk`ï¼Œç¡®ä¿å›¾è¡¨ä¸æŠ¥è¡¨åœ¨ä¸­æ–‡ç¯å¢ƒä¸‹æ— ä¹±ç ã€‚

## ğŸ§± æŠ€æœ¯æ ˆæ€»è§ˆ

| æ¨¡å— | æŠ€æœ¯ | è¯´æ˜ |
| --- | --- | --- |
| æœåŠ¡æ¡†æ¶ | FastMCP | å®ç° MCP æœåŠ¡ç«¯ä¸å·¥å…·æš´éœ² |
| æ•°æ®è®¿é—® | SQLAlchemyã€PyMySQL | ORM ç®¡ç†æ¨¡å‹ï¼Œè¿æ¥ MySQL |
| é…ç½®æ ¡éªŒ | Pydantic | ä¿éšœé…ç½®ã€è¯·æ±‚å‚æ•°çš„åˆæ³•æ€§ |
| éƒ¨ç½² | Dockerã€docker-compose | å®¹å™¨åŒ–éƒ¨ç½²ä¸å¤šæœåŠ¡ç¼–æ’ |

## ğŸš€ æ„å»ºä¸éƒ¨ç½²æŒ‡å—

### âœ… æ¨èï¼šDocker Compose

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone https://github.com/yourusername/mcp-finance-tracker.git
   cd mcp-finance-tracker
   ```
2. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose up -d
   ```
3. **å®æ—¶æŸ¥çœ‹æ—¥å¿—**
   ```bash
   docker-compose logs -f mcp_server
   ```

é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨ï¼š
- åˆ›å»º MySQL æ•°æ®åº“ä¸æ‰€éœ€è¡¨ç»“æ„ã€‚
- å†™å…¥é»˜è®¤åˆ†ç±»ï¼ˆé¤é¥®ã€äº¤é€šã€è´­ç‰©ã€æ”¶å…¥ï¼‰ã€‚
- å®‰è£…ä¸­æ–‡å­—ä½“ä»¥æ”¯æŒå›¾è¡¨æ¸²æŸ“ã€‚

### ğŸ› ï¸ æœ¬åœ°è¿è¡Œ / äºŒæ¬¡å¼€å‘

1. **å‡†å¤‡ç¯å¢ƒ**ï¼šç¡®ä¿å·²å®‰è£… Python 3.11+ ä¸ MySQLã€‚
2. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```
3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env è®¾ç½® DB_HOST / DB_PORT / DB_USER / DB_PASSWORD / DB_NAME
   ```
4. **å¯åŠ¨ MySQLï¼ˆå¯é€‰ï¼‰**
   ```bash
   docker-compose up -d mysql
   ```
5. **è¿è¡ŒæœåŠ¡**
   ```bash
   python -m mcp.mcp_server
   ```

> ğŸ’¡ å¦‚æœéœ€è¦åœ¨æœ¬åœ°è‡ªå®šä¹‰å›¾è¡¨å­—ä½“ï¼Œå¯å°† `MCP_CHART_FONT_PATH` æŒ‡å‘å¯¹åº”çš„ `.ttf` æˆ– `.otf` æ–‡ä»¶ã€‚

## ğŸ”Œ MCP å·¥å…·èƒ½åŠ›

| Tool åç§° | ç”¨é€” | ç¤ºä¾‹ |
| --- | --- | --- |
| `get_categories` | æŸ¥è¯¢æ‰€æœ‰è®°è´¦åˆ†ç±»åŠæè¿° | `await get_categories()` |
| `record_bill` | è®°å½•æ”¶å…¥/æ”¯å‡ºè´¦å• | `await record_bill(amount=100.5, type="expense", category_id=1)` |

`record_bill` æ”¯æŒï¼š
- `amount`ï¼šæ­£æ•°é‡‘é¢ã€‚
- `type`ï¼š`income` æˆ– `expense`ã€‚
- `category_id`ï¼šå¯é€‰åˆ†ç±» IDï¼Œç¼ºçœæ—¶è®°å½•ä¸ºæœªåˆ†ç±»ã€‚
- `description`ï¼šè´¦å•å¤‡æ³¨ã€‚

## ğŸ—‚ æ•°æ®æ¨¡å‹é€Ÿè§ˆ

### åˆ†ç±»ï¼ˆ`categories`ï¼‰
- `id`ï¼šä¸»é”®
- `name`ï¼šå”¯ä¸€åˆ†ç±»å
- `description`ï¼šåˆ†ç±»æè¿°

### è´¦å•ï¼ˆ`bills`ï¼‰
- `id`ï¼šä¸»é”®
- `amount`ï¼šé‡‘é¢
- `type`ï¼š`income` / `expense`
- `category_id`ï¼šå¤–é”®å…³è”åˆ†ç±»
- `description`ï¼šå¤‡æ³¨ä¿¡æ¯

## ğŸ“ é¡¹ç›®ç»“æ„

```
mcp-finance-tracker/
â”œâ”€â”€ mcp/
â”‚   â”œâ”€â”€ __init__.py          # MCP åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ mcp_server.py        # MCP æœåŠ¡ç«¯ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ crud.py              # æ•°æ®åº“ CRUD æ“ä½œ
â”‚   â”œâ”€â”€ config.py            # é…ç½®ä¸ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ schemas.py           # Pydantic æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ models.py            # SQLAlchemy æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ database.py          # æ•°æ®åº“ä¼šè¯ç®¡ç†
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ Dockerfile               # Docker é•œåƒå®šä¹‰
â”œâ”€â”€ docker-compose.yml       # docker-compose é…ç½®
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md                # é¡¹ç›®è¯´æ˜
```

## ğŸ“œ è®¸å¯è¯

MIT License
